<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yiddish Transcription Search</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        input { padding: 10px; width: 100%; margin-bottom: 10px; }
        button { padding: 10px; width: 100%; }
        #result { margin-top: 20px; font-size: 18px; }
    </style>
</head>
<body>
    <h1>Yiddish Transcription Search</h1>
    <input type="text" id="searchInput" placeholder="Enter a word...">
    <button onclick="searchWord()">Search</button>
    <div id="result"></div>

    <script>
    let data = []; // Array of {word, transcription}

    function loadCSV() {
        fetch('data.csv')
            .then(response => {
                if (!response.ok) throw new Error('CSV file not found');
                return response.text();
            })
            .then(csvText => {
                const rows = csvText.split('\n')
                    .map(row => row.trim())
                    .filter(row => row.length > 0 && !row.startsWith('#')); // skip comments/empty

                data = rows.slice(1).map(row => {  // skip header
                    const parts = row.split(',');
                    if (parts.length < 2) return null;
                    
                    const word = parts[0].trim().toLowerCase();
                    // Join remaining parts in case transcription has commas
                    const transcription = parts.slice(1).join(',').trim();
                    
                    return { word, transcription };
                }).filter(item => item !== null && item.word !== '');

                console.log("Loaded " + data.length + " entries:");
                console.table(data); // nice table in console
            })
            .catch(error => {
                console.error('Error loading CSV:', error);
                document.getElementById('result').textContent = 'Error: Could not load data file.';
            });
    }

    function searchWord() {
        const inputElem = document.getElementById('searchInput');
        const resultDiv = document.getElementById('result');
        
        let input = inputElem.value.trim().toLowerCase();
        
        if (!input) {
            resultDiv.textContent = 'נאָך אַ וואָרט אַרײַנשרײַבן';
            return;
        }

        const match = data.find(item => item.word === input);
        
        resultDiv.innerHTML = match 
            ? `Transcription: <strong dir="rtl">${match.transcription}</strong>`
            : `נישט געפֿונען: "${input}"`;
    }

    // Load when page opens
    window.onload = loadCSV;
</script>
</body>
</html>
